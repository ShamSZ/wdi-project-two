<div class="has-text-centered">
  <h2 class="title is-4">Restaurants</h2>
</div>

<section class="restaurant-grid columns is-multiline is-centered">
  <% restaurants.forEach(restaurant => { %>
  <article class="column is-9">
      <div class="restaurant-block columns">
        <div class="column is-4">
          <a href="/restaurants/<%= restaurant._id %>"><img src="<%= restaurant.image %>"/></a>
        </div>
        <div class="column is-5">
          <div class="columns is-multiline">
            <div class="column is-12">
              <h3 class="title is-5"><%= restaurant.name %></h3>
              <p class="subtitle is-6" >Cuisine: <%= restaurant.cuisine %></p>
            </div>
            <div class="column is-9">
              <p><%= restaurant.description %></p>
            </div>
          </div>
        </div>
        <div class="column is-3">
          <p>Rating:
            <% if(restaurant.averageRating === 'None'){ %>
              Not reviewed yet
            <% } else { %>
              <%= '⭐️'.repeat(restaurant.averageRating) %>
            <% } %>
          </p>
          <p>Price: <%= '💰'.repeat(restaurant.price) %></p>
          <a href="/restaurants/<%= restaurant._id %>"><button class="button">View</button></a>
        </div>
      </div>

  </article>
  <% }) %>
</section>

<div class="">
  <p><strong><%= restaurants.length %></strong> restaurants added so far.
    <% if(locals.isLoggedIn) { %>
      <a href="/restaurants/new"><button class="button is-pulled-right">New Restaurant</button></a>
    <% } else { %>
      <span class="is-pulled-right">Log in to add new restaurants</span>
    <% } %>
  </p>
</div>
